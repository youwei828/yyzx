<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>
    <body>
        <script>
            // 基本用法,没有abort(),timeout()
            //可以直接使用，调用Fecth()之后返回Promise对象
            // console.log(fetch);
            const url = 'https://www.imooc.com/api/http/search/suggest?words=js';
            const fd = new FormData();
            fd.append('username', 'alex');
            fetch(url, {
                method: 'post',
                //bodty请求体携带数据
                // body:null
                // body: 'user=elex&age=18',
                // body: JSON.stringify({ username: 'alex' }),
                body: fd,
                headers: {
                    // 'Content-Type': 'application/x-www-form-urlencoded',
                    // 'Content-Type': 'application/json',
                },
                //跨域，默认cors
                // mode: 'cors',
                //跨域是否携带cookie
                // credentials: 'include',
            })
                .then(response => {
                    console.log(response);
                    //body/bodyUserd
                    //body只能读一次，读过之后就不让再读了
                    //ok()如果为true，表示可以读取数据，不用再去判断HTTP状态码了
                    if (response.ok) {
                        return response.json();
                        // return response.text()
                    } else {
                        throw new Error(`HTTP状态码异常${response.status}`);
                    }
                })
                .then(data => {
                    console.log(data);
                })
                .catch(err => {
                    console.log(err);
                });
        </script>
    </body>
</html>
